(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return t}});let t=e=>{}},84614,e=>{"use strict";e.s(["User",()=>s],84614);let s=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2737,e=>{"use strict";e.s(["ClientWrapper",()=>t]);var s=e.i(43476),a=e.i(63780);function t(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(a.Navbar,{}),t]})}},97375,e=>{"use strict";e.s(["AdminInit",()=>m],97375);var s=e.i(43476),a=e.i(71645),t=e.i(17255),i=e.i(67881),r=e.i(70065),l=e.i(94179),n=e.i(75254);let c=(0,n.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),d=(0,n.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),u=(0,n.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function m(){var e,n,m,o;let{data:x,update:h}=(0,t.useSession)(),[p,j]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[f,N]=(0,a.useState)(""),g=async()=>{j(!0),N("");try{let e=await fetch("/api/auth/init-admin",{method:"POST",headers:{"Content-Type":"application/json"}}),s=await e.json();e.ok?(y(!0),await h()):N(s.error||"Erreur lors de la définition du rôle admin")}catch(e){N("Erreur de connexion")}finally{j(!1)}};return x?(0,s.jsxs)(r.Card,{className:"max-w-md mx-auto",children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-5 w-5 text-yellow-500"}),"Initialisation Admin"]}),(0,s.jsx)(r.CardDescription,{children:"Le premier utilisateur connecté peut devenir administrateur"})]}),(0,s.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Utilisateur actuel :"}),(0,s.jsx)(l.Badge,{variant:"outline",children:null==(e=x.user)?void 0:e.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Rôle actuel :"}),(0,s.jsx)(l.Badge,{variant:(null==(n=x.user)?void 0:n.role)==="admin"?"default":"secondary",children:(null==(m=x.user)?void 0:m.role)||"user"})]}),(null==(o=x.user)?void 0:o.role)==="admin"?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,s.jsx)(d,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:"Vous êtes déjà administrateur"})]}):v?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,s.jsx)(d,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:"Rôle admin défini avec succès !"})]}):(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2 text-amber-600",children:[(0,s.jsx)(u,{className:"h-4 w-4 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{children:"En tant que premier utilisateur, vous pouvez devenir administrateur."}),(0,s.jsx)("p",{className:"text-xs mt-1",children:"Cela vous donnera accès au dashboard admin et à la gestion des recettes."})]})]}),(0,s.jsx)(i.Button,{onClick:g,disabled:p,className:"w-full",children:p?"Définition en cours...":"Devenir Administrateur"}),f&&(0,s.jsx)("div",{className:"text-sm text-red-600 bg-red-50 dark:bg-red-950 p-2 rounded",children:f})]})]})]}):null}}]);